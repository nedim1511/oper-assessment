<app-error-alert
  *ngIf="errorMessage"
  [message]="errorMessage"
></app-error-alert>

<div
  class="forecast"
  *ngIf="weatherForecast$ | async as weatherForecast; else loading"
>
  <h2 class="title">{{ weatherForecast.length }}-Day Weather Forecast</h2>
  <ul class="list">
    <li
      *ngFor="let forecast of weatherForecast"
      class="item"
      (click)="onForecastItemClick(forecast)"
    >
      <h3 class="date">{{ forecast.dt_txt | date : "EEE, MMM d" }}</h3>
      <div class="details">
        <div class="detail">
          <img
            class="icon"
            [src]="
              openWeatherMapBaseImageUrl + forecast.weather[0].icon + '.png'
            "
            [alt]="forecast.weather[0].description"
          />
          <span class="label">Description:</span>
          <span class="value">{{
            forecast.weather[0].description | titlecase
          }}</span>
        </div>
        <div class="detail">
          <span class="label">Temperature:</span>
          <span class="value">{{ forecast.main.temp }} &#8451;</span>
        </div>
        <div class="detail">
          <span class="label">Feels Like:</span>
          <span class="value">{{ forecast.main.feels_like }} &#8451;</span>
        </div>
        <div class="detail">
          <span class="label">Minimum Temperature:</span>
          <span class="value">{{ forecast.main.temp_min }} &#8451;</span>
        </div>
        <div class="detail">
          <span class="label">Maximum Temperature:</span>
          <span class="value">{{ forecast.main.temp_max }} &#8451;</span>
        </div>
        <div class="detail">
          <span class="label">Pressure:</span>
          <span class="value">{{ forecast.main.pressure }} hPa</span>
        </div>
        <div class="detail">
          <span class="label">Humidity:</span>
          <span class="value">{{ forecast.main.humidity }}%</span>
        </div>
      </div>
    </li>
  </ul>
</div>

<ng-template #loading>
  <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
</ng-template>
